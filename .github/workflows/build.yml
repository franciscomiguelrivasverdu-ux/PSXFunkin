name: Build PSXFunkin

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
        
    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential git make gcc
        
    - name: Build asset tools
      run: |
        make -f Makefile.tools
        make -f Makefile.tim
        make -f Makefile.mus
        
    - name: Create success marker
      run: |
        echo "✅ SISTEMA DE BUILD LISTO" > build-success.txt
        echo "Ahora puedes:" >> build-success.txt
        echo "1. Subir sprites convertidos" >> build-success.txt
        echo "2. Subir música convertida" >> build-success.txt
        echo "3. Subir charts JSON" >> build-success.txt
        echo "4. Compilar port completo" >> build-success.txt
        
    - name: Upload success artifact
      uses: actions/upload-artifact@v4
      with:
        name: build-system-ready
        path: build-success.txt
